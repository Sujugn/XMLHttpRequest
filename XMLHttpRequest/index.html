<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTP통신과 JSON</title>
    <script>

    //jsonplaceholder
    // let student = {
    //     name: '홍길동',
    //     major: '컴퓨터 공학',
    //     grade: 2
    // }

    // console.log(student)

    // let json = JSON.stringify(student, null, 2)

    // console.log(json)

/*
    let student = '{"name" : "이순신","major": "프로그램학과","grade" : 3}'
    //★json 데이터 문자열이기때문에 '' 필수

    console.log(student)

    console.log(JSON.parse(student))
    //객체 데이터로 변환

*/


/*
        let xhr = new XMLHttpRequest()
        xhr.open('GET', 'student.json')
        //요청 초기화
        xhr.send()

        xhr.onreadystatechange = function(){

            if(xhr.readyState === 4 && xhr.status === 200){
                let student = JSON.parse(xhr.responseText)
                //console.log(student)
                document.getElementById('root').innerHTML = `
                <h1>${student.name}</h1>
                <ul>
                <li class="txt">전공 : ${student.major}</li>    
                <li>학년 : ${student.grade}</li>    
                </ul>
                `
            }
        }

 */



        
        
      /*  let xhr = new XMLHttpRequest()
        xhr.open('GET', 'student.json')
        xhr.send()

        xhr.onreadystatechange = function(){

            if(xhr.readyState === 4 && xhr.status === 200){
                let students = JSON.parse(xhr.responseText)
                //console.log(students)
                viewStudents(students)
            }
        }

        function viewStudents (contents) {
            let output = ``
            for(let content of contents){
                output += `
                <ul>
                    <h3> ${content.name} </h3>
                    <li><img src='${content.img}'</li>  
                    <li>전공: ${content.major}</li>  
                    <li>학년: ${content.grade}</li>  
                </ul>
                `
            }
            document.getElementById('root').innerHTML = output

        }*/


        // let xhr = new XMLHttpRequest()
        // //인스턴스(객체변수 만들기) 
        // xhr.open('GET', 'https://jsonplaceholder.typicode.com/users')
        // //'방식','경로'
        // //방식: GET , POST (회원가입,로그인)

        // xhr.send()

        // xhr.onreadystatechange = function(){

        //     if(xhr.readyState === 4 && xhr.status === 200){
        //         let students = JSON.parse(xhr.responseText)
        //         //responseText: 요청받음
        //         //console.log(students)
        //         viewStudents(students)
        //     }
        // }

        //응답코드
        //200:서버에서 클라이언트로 성공적으로 전송
        //202:서버에서 클라이언트 요청을 수락


        // function viewStudents (contents) {
        //     let output = ``
        //     for(let content of contents){
        //         output += `
        //         <ul>
        //             <h3> ${content.name} </h3>
        //             <li>닉네임: ${content.username}</li>  
        //             <li>이메일: ${content.email}</li>  
        //             <li>주소: ${content.address.street}</li>  
        //         </ul>
        //         `
        //     }
        //     document.getElementById('root').innerHTML = output

        // }

        //동기: 프로그래밍 소스가 작성한 순서대로 소스를 처리 하는 방식
         //    (상대가 준비됬을때 전송)

         //비동기 처리방식(JS) : 실행시간이 다른함수들을 원하는 처리 순서에 의해 프로그래밍 하는것 
        //      (시간이 짧은것부터 먼저처리 함)


        //  promise(res,rej) 
        // res: 성공했을때 실행
        // rej : 실패했을때 실행

        //finally: 성공,실패 상관없이 실행



        // // fetch('student.json')
        // // then(Response => Response.Json())
        // // then(students => {
        // //     let student = ''
        // //     student.foreach(content => {
        // //         output += `
        // //         <ul>
        // //             <h3>$(content.name)</h3>
        // //             <li><img src = '${content.img}' </li>
        // //             <li>전공: ${content.major} </li>
        // //             <li>학년: ${content.grade} </li>
        // //         </ul>
        //                  `
        // //     })
        //document.getElementById('root HTML = output')
        //})
        //.catch(error)
        // // })


        















    </script>


<style>

.txt{
    color: red;
}


</style>

</head>
<body>

    <div id="root"></div>



    
</body>
</html>